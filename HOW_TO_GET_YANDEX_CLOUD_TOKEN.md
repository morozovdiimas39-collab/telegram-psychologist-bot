# Как получить YANDEX_CLOUD_TOKEN

## Что это такое

`YANDEX_CLOUD_TOKEN` — это OAuth токен Yandex Cloud, который нужен для работы с API Yandex Cloud (создание VM, функций, управление ресурсами).

## Как получить токен

### Способ 1: Через Yandex OAuth (рекомендуется)

1. **Открой страницу получения токена:**
   - Перейди по ссылке: https://oauth.yandex.ru/

2. **Авторизуйся:**
   - Войди в свой аккаунт Yandex (тот же, что используется для Yandex Cloud)

3. **Получи токен:**
   - Нажми кнопку **"Получить токен"** или **"Разрешить"**
   - Разреши доступ к **Yandex Cloud**

4. **Скопируй токен:**
   - После авторизации ты увидишь токен (длинная строка букв и цифр)
   - **ВАЖНО:** Скопируй его сразу! Он больше не будет показан

5. **Сохрани токен:**
   - Это и есть твой `YANDEX_CLOUD_TOKEN`
   - Используй его как переменную окружения в функциях

### Способ 2: Через Yandex Cloud Console (альтернатива)

1. Открой [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. Перейди в **IAM** → **Сервисные аккаунты**
3. Создай сервисный аккаунт (если нет)
4. Назначь ему роли:
   - `editor` (для создания ресурсов)
   - `serverless.functions.admin` (для управления функциями)
   - `compute.admin` (для управления VM)
5. Создай ключ для сервисного аккаунта
6. Используй этот ключ как токен

**Но проще использовать OAuth токен из способа 1!**

## Где использовать токен

Добавь `YANDEX_CLOUD_TOKEN` как переменную окружения в следующие функции:

- ✅ `setup-database` - создание VM с БД
- ✅ `vm-setup` - создание VM для деплоя
- ✅ `deploy-functions` - деплой backend функций
- ✅ `yc-sync` - синхронизация VM с Yandex Cloud

## Важно

- ⚠️ Токен действует ограниченное время (обычно 1 год)
- ⚠️ Храни токен в безопасности — не публикуй его в открытом доступе
- ⚠️ Если токен истёк — получи новый через https://oauth.yandex.ru/

## Проверка токена

После получения токена можно проверить его:

```bash
curl -H "Authorization: Bearer ТВОЙ_ТОКЕН" \
  https://iam.api.cloud.yandex.net/iam/v1/tokens:validate
```

Если токен валидный, получишь ответ с информацией о токене.

## Пример использования

В Yandex Cloud Console при создании функции:

1. Открой функцию
2. Версии → Редактировать
3. Переменные окружения → Добавить:
   - **Ключ**: `YANDEX_CLOUD_TOKEN`
   - **Значение**: твой токен из https://oauth.yandex.ru/
4. Сохрани

Готово! Функция сможет работать с Yandex Cloud API.
